<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developer-guide/compiling-methods/compile-using-docker">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/zh/community/rss.xml" title="StoneDB RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/community/atom.xml" title="StoneDB Atom Feed">
<link rel="icon" href="/zh/img/stoneDB.png">
<link rel="manifest" href="/zh/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/zh/img/stoneDB.png">
<link rel="mask-icon" href="/zh/img/stoneDB.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/zh/img/stoneDB.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">Compile StoneDB in a Docker Container | StoneDB</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://stonedb.io/zh/docs/developer-guide/compiling-methods/compile-using-docker"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Compile StoneDB in a Docker Container | StoneDB"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://stonedb.io/zh/docs/developer-guide/compiling-methods/compile-using-docker"><link data-rh="true" rel="alternate" href="https://stonedb.io/docs/developer-guide/compiling-methods/compile-using-docker" hreflang="en"><link data-rh="true" rel="alternate" href="https://stonedb.io/zh/docs/developer-guide/compiling-methods/compile-using-docker" hreflang="zh"><link data-rh="true" rel="alternate" href="https://stonedb.io/docs/developer-guide/compiling-methods/compile-using-docker" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.cee48ecd.css">
<link rel="preload" href="/zh/assets/js/runtime~main.24d524fa.js" as="script">
<link rel="preload" href="/zh/assets/js/main.349d3591.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/zh/"><div class="navbar__logo"><img src="/zh/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--dark_i4oU"></div><span class="navbar__title text--truncate">首页</span></a><a class="navbar__item navbar__link" href="/zh/docs/download">下载</a><a class="navbar__item navbar__link" href="/zh/docs/about-stonedb/intro">文档</a><a class="navbar__item navbar__link" href="/zh/community/main">社区</a></div><div class="navbar__items navbar__items--right"><div class="ant-space ant-space-horizontal ant-space-align-center styles__GithubStyle-sc-gz8zhn-0 fMOuum hideInMobile"><div class="ant-space-item" style="margin-right:8px"></div><div class="ant-space-item"></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu9"></use></svg></span>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/developer-guide/compiling-methods/compile-using-docker" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh/docs/developer-guide/compiling-methods/compile-using-docker" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">简体中文</a></li></ul></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" target="_self" href="/zh/"><img src="/zh/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zh/img/logo_stonedb.svg" alt="StoneDB" class="themedImage_ToTc themedImage--dark_i4oU"><span>首页</span></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/about-stonedb/intro">关于StoneDB</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/environment-requirements/supported-servers-and-oss">环境要求</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/getting-started/quick-deployment">快速上手</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/O&amp;M-Guide/regular-change-operations">运维管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zh/docs/compiling-methods">开发者指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/zh/docs/compiling-methods">编译方法</a><button aria-label="打开/收起侧边栏菜单「编译方法」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/developer-guide/compiling-methods/compile-overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/developer-guide/compiling-methods/compile-using-centos7">Compile StoneDB on CentOS 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/developer-guide/compiling-methods/compile-using-redhat7">Compile StoneDB on RHEL 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/developer-guide/compiling-methods/compile-using-ubuntu20.04">Compile StoneDB on Ubuntu 20.04</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/developer-guide/compiling-methods/compile-using-docker">Compile StoneDB in a Docker Container</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/developer-guide/connect-to-stonedb/use-mysql-client">连接 StoneDB 数据库</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/developer-guide/regular-change-operations">DML Statements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/developer-guide/statements-for-queries">Statements for Queries</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/developer-guide/create-and-manage-database-objects/create-and-manage-database">创建和管理数据库对象</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/zh/docs/developer-guide/appendix/configuration-parameters">附录</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/SQL-reference/character-sets">SQL 参考</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/performance-tuning/overview">性能优化</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/data-migration-to-stonedb/use-outter-to-migrate">向StoneDB迁移数据</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/troubleshooting/failed-to-start">故障诊断</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zh/docs/FAQ/install-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/docs/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/docs/download">即将发布</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">开发者指南</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/docs/compiling-methods"><span itemprop="name">编译方法</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Compile StoneDB in a Docker Container</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Compile StoneDB in a Docker Container</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">Introduction<a class="hash-link" href="#introduction" title="标题的直接链接">​</a></h2><p>Compiling StoneDB on a physical server requires installation of third-party repositories, which is complicated. In addition, if the OS in your environment is Fedora or Ubuntu, you also need to install many dependencies. We recommend that you compile StoneDB in a Docker container. After StoneDB is compiled, you can directly run StoneDB in the container or copy the compilation files to your environment.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="标题的直接链接">​</a></h2><p>Docker has been installed. For information about how to install Docker, visit <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">https://docs.docker.com/engine/install/ubuntu/</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-a-dockerfile-in-a-compilation-environment">Use a Dockerfile in a compilation environment<a class="hash-link" href="#use-a-dockerfile-in-a-compilation-environment" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-1-download-the-source-code-of-stonedb-and-dockerzip">Step 1. Download the source code of StoneDB and docker.zip<a class="hash-link" href="#step-1-download-the-source-code-of-stonedb-and-dockerzip" title="标题的直接链接">​</a></h3><p>Download file <strong>docker.zip</strong>, save the file to the root directory of the source code of StoneDB, and then decompress the file.</p><p><em>docker.zip(waiting)</em></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cd /home/src/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># git clone https://github.com/stoneatom/stonedb.git</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Cloning into </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;stonedb&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">remote: Enumerating objects: </span><span class="token number" style="color:rgb(247, 140, 108)">84350</span><span class="token plain">, done.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">remote: Counting objects: </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">84350</span><span class="token plain">/84350</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">, done.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">remote: Total </span><span class="token number" style="color:rgb(247, 140, 108)">84350</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">delta </span><span class="token number" style="color:rgb(247, 140, 108)">19707</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">, reused </span><span class="token number" style="color:rgb(247, 140, 108)">83550</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">delta </span><span class="token number" style="color:rgb(247, 140, 108)">19707</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">, pack-reused </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Receiving objects: </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">84350</span><span class="token plain">/84350</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">, </span><span class="token number" style="color:rgb(247, 140, 108)">402.19</span><span class="token plain"> MiB </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">13.50</span><span class="token plain"> MiB/s, done.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Resolving deltas: </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">19707</span><span class="token plain">/19707</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">, done.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cd atomstore2022/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#Use an FTP tool to upload &#x27;docker.zip&#x27; to this directory for decompression.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># unzip docker.zip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># tree docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── cmake.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── docker_build.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── Dockerfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── stonedb-boost1.66.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── stonedb-gcc-rocksdb.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── stonedb-marisa.tar.gz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> directories, </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain"> files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-2-build-a-docker-image">Step 2. Build a Docker image<a class="hash-link" href="#step-2-build-a-docker-image" title="标题的直接链接">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cd docke</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># chmod u+x docker_build.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If an image has been created in your environment, you can use the cache. If this is the first image that is to be created in your environment, you must install dependencies. This may take a longer period of time.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Run the &#x27;./docker_build.sh &lt;tag&gt;&#x27; command to call the script. &lt;tag&gt; specifies the tag of the image.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Example &#x27;./docker_build.sh 0.1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ./docker_build.sh v0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/home/src</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sending build context to Docker daemon  </span><span class="token number" style="color:rgb(247, 140, 108)">99</span><span class="token plain">.41MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> FROM centos:7</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> eeb6ee3f44bd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> ENV container </span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> dc33c0e29f61</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cd /lib/systemd/system/sysinit.target.wants/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(191, 199, 213)">i</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> *</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$i</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> systemd-tmpfiles-setup.service </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f </span><span class="token variable" style="color:rgb(191, 199, 213)">$i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /lib/systemd/system/multi-user.target.wants/*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /etc/systemd/system/*.wants/*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /lib/systemd/system/local-fs.target.wants/*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /lib/systemd/system/sockets.target.wants/*udev*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /lib/systemd/system/sockets.target.wants/*initctl*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /lib/systemd/system/basic.target.wants/*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -f /lib/systemd/system/anaconda.target.wants/*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 12ca4ee4c8b0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y epel-release.noarch</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 8b9a0d9cb423</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN  yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y snappy-devel lz4-devel bzip2-devel libzstd-devel.x86_64 ncurses-devel </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> bison libaio ncurses-devel perl perl-DBI perl-DBD-MySQL perl-Time-HiRes readline-devel numactl zlib-devel curldevel openssl-devel redhat-lsb-core.x86_64 </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> c7cf717b95c4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y centos-release-scl </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> devtoolset-7-gcc* -y</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> e512aca12c7e</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN </span><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s /opt/rh/devtoolset-7/root/bin/gcc /usr/bin/gcc    </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s /opt/rh/devtoolset-7/root/bin/g++ /usr/bin/g++    </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s /opt/rh/devtoolset-7/root/bin/c++ /usr/bin/c++</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 39cb9ada4812</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN yum clean all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 1370d1dc1a8e</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> ADD cmake.tar.gz /usr/local/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> f93823785ade</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> RUN </span><span class="token function" style="color:rgb(130, 170, 255)">ln</span><span class="token plain"> -s /usr/local/cmake/bin/cmake /usr/bin/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> f5f9d2b3c35b</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> ADD stonedb-marisa.tar.gz /usr/local/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> e787d2341307</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> ADD stonedb-boost1.66.tar.gz /usr/local/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 5d115e2ddb34</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">13</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> ADD stonedb-gcc-rocksdb.tar.gz /usr/local/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> a338f6756d71</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step </span><span class="token number" style="color:rgb(247, 140, 108)">14</span><span class="token plain">/14 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> CMD </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/usr/sbin/init&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ---</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> 38381cd2bf3d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully built 38381cd2bf3d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully tagged stonedb_buildenv:v0.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Docker build success</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">you can run it:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run -d -p </span><span class="token number" style="color:rgb(247, 140, 108)">23306</span><span class="token plain">:3306 -v /home/src:/home/ stonedb_buildenv:v0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="step-3-enter-the-container-and-compile-stonedb">Step 3. Enter the container and compile StoneDB<a class="hash-link" href="#step-3-enter-the-container-and-compile-stonedb" title="标题的直接链接">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker run parameter description</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># -v Directory mounting. Specify the directory on the host first and then the directory in the container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># -p Port mapping. Specify the port on the host first and then the port in the container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#    After configuring the port mapping, you can directly start StoneDB in the container. If you do not need the trial, you can skip this parameter.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker run You can refer to the commands used in &#x27;Step 2. Build a Docker image&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker run -d -p 23306:3306 -v /home/src:/home/ stonedb_buildenv:v0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">06f1f385d3b35c86c4ed324731a13785b2a66f8ef2c3423c9b4711c56de1910f</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker ps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONTAINER ID        IMAGE                   COMMAND             CREATED             STATUS              PORTS                     NAMES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">06f1f385d3b3        stonedb_buildenv:v0.1   </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/usr/sbin/init&quot;</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token plain"> seconds ago      Up </span><span class="token number" style="color:rgb(247, 140, 108)">17</span><span class="token plain"> seconds       </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0:23306-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token number" style="color:rgb(247, 140, 108)">3306</span><span class="token plain">/tcp   confident_tesla</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Enter the Docker container and compile StoneDB.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@testOS docker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># docker exec -it 06f1f385d3b3 bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 home</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cd /home/atomstore2022/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># git branch -a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* </span><span class="token number" style="color:rgb(247, 140, 108)">0.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  remotes/origin/0.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  remotes/origin/0.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  remotes/origin/HEAD -</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> origin/0.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># git checkout 0.5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Branch </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> up to track remote branch </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token plain"> from origin.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Switched to a new branch </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;0.5&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># git branch -a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  remotes/origin/0.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  remotes/origin/0.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  remotes/origin/HEAD -</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> origin/0.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># mkdir build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 atomstore2022</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cd build/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cmake ../ \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DCMAKE_BUILD_TYPE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">RelWithDebInfo </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DCMAKE_INSTALL_PREFIX</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/stonedb56/install </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DMYSQL_DATADIR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/stonedb56/install/data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DSYSCONFDIR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/stonedb56/install </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DMYSQL_UNIX_ADDR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/stonedb56/install/tmp/mysql.sock </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DWITH_EMBEDDED_SERVER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">OFF </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DWITH_STONEDB_STORAGE_ENGINE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DWITH_MYISAM_STORAGE_ENGINE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DWITH_INNOBASE_STORAGE_ENGINE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DWITH_PARTITION_STORAGE_ENGINE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DMYSQL_TCP_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">3306</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DENABLED_LOCAL_INFILE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DEXTRA_CHARSETS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">all </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DDEFAULT_CHARSET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">utf8 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DDEFAULT_COLLATION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">utf8_general_ci </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DDOWNLOAD_BOOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-DWITH_BOOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/local/stonedb-boost/include/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#After the &#x27;cmake&#x27; command is completed, run the &#x27;make&#x27; and &#x27;make install&#x27; commands.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># make </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># make install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="optional-follow-up-operations">(Optional) Follow-up operations<a class="hash-link" href="#optional-follow-up-operations" title="标题的直接链接">​</a></h2><p>After the <code>make</code> commands are successful, you can choose either to compress the compilation files to a TAR file and copy the TAR file from the container or to directly run it in the container.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="compress-compilation-files-to-a-tar-file">Compress compilation files to a TAR file<a class="hash-link" href="#compress-compilation-files-to-a-tar-file" title="标题的直接链接">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Compress the &#x27;home&#x27; folder to a TAR file and mount the TAR file to a directory outside the container.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># tar -zcPvf /home/stonedb56.tar.gz /stonedb56/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="directly-use-stonedb-in-the-container">Directly use StoneDB in the container<a class="hash-link" href="#directly-use-stonedb-in-the-container" title="标题的直接链接">​</a></h3><p>You can refer to <a href="https://stoneatom.yuque.com/staff-ft8n1u/dghuxr/pv8ath" target="_blank" class="styles__LinkStyle-sc-1kv35k6-0 igBeEE">Quick Deployment</a> or the following code to deploy and use StoneDB in the container.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cd /stonedb56/install/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># groupadd mysql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># useradd -g mysql mysql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ll</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">total </span><span class="token number" style="color:rgb(247, 140, 108)">180</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root  </span><span class="token number" style="color:rgb(247, 140, 108)">17987</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 COPYING</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root </span><span class="token number" style="color:rgb(247, 140, 108)">102986</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 INSTALL-BINARY</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">2615</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 README</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 bin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> root root     </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> root root     </span><span class="token number" style="color:rgb(247, 140, 108)">55</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 docs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 include</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root    </span><span class="token number" style="color:rgb(247, 140, 108)">267</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 install.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> root root    </span><span class="token number" style="color:rgb(247, 140, 108)">272</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 lib</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> root root     </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 </span><span class="token function" style="color:rgb(130, 170, 255)">man</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x. </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 mysql-test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root  </span><span class="token number" style="color:rgb(247, 140, 108)">12516</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 mysql_server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root    </span><span class="token number" style="color:rgb(247, 140, 108)">764</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 reinstall.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> root root     </span><span class="token number" style="color:rgb(247, 140, 108)">57</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 scripts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x. </span><span class="token number" style="color:rgb(247, 140, 108)">28</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 share</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 sql-bench</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--.  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> root root   </span><span class="token number" style="color:rgb(247, 140, 108)">5526</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 03:41 stonedb.cnf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drwxr-xr-x.  </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> root root    </span><span class="token number" style="color:rgb(247, 140, 108)">136</span><span class="token plain"> Jun  </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> 06:16 support-files</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ./reinstall.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If the following information is returned, StoneDB is started.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ log_success_msg</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ /etc/redhat-lsb/lsb_log_message success</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/redhat-lsb/lsb_log_message: line </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">: /etc/init.d/functions: No such </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> or directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/etc/redhat-lsb/lsb_log_message: line </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token plain">: success: </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">command</span><span class="token plain"> not found</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">return_value</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">test</span><span class="token plain"> -w /var/lock/subsys</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ </span><span class="token function" style="color:rgb(130, 170, 255)">touch</span><span class="token plain"> /var/lock/subsys/mysql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exit</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Reset the password of local user &#x27;root&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /stonedb56/install/bin/mysqladmin flush-privileges -u root password &quot;*******&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Warning: Using a password on the </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">command</span><span class="token plain"> line interface can be insecure.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Create a username and password for remote connection.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">root@06f1f385d3b3 install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># /stonedb56/install/bin/mysql -uroot -p*******</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Warning: Using a password on the </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">command</span><span class="token plain"> line interface can be insecure.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Welcome to the MySQL monitor.  Commands end with </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> or </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">g.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Your MySQL connection </span><span class="token function" style="color:rgb(130, 170, 255)">id</span><span class="token plain"> is </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Server version: </span><span class="token number" style="color:rgb(247, 140, 108)">5.6</span><span class="token plain">.24-StoneDB-log build-</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Copyright </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000</span><span class="token plain">, </span><span class="token number" style="color:rgb(247, 140, 108)">2022</span><span class="token plain"> StoneAtom Group Holding Limited</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Type </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;help;&#x27;</span><span class="token plain"> or </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;\h&#x27;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> help. Type </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;\c&#x27;</span><span class="token plain"> to </span><span class="token function" style="color:rgb(130, 170, 255)">clear</span><span class="token plain"> the current input statement.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysql</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> grant all ON *.* to root@</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;%&#x27;</span><span class="token plain"> identified by </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;********&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Query OK, </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> rows affected </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mysql</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> flush privileges</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Query OK, </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> rows affected </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0.00</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After you start StoneDB in the container, you can log in to and use StoneDB or run the <code>docker run -p &lt;port mapping&gt;</code> command to connect to StoneDB.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/stoneatom/stonedb-docs/edit/main/i18n/zh/docusaurus-plugin-content-docs/current/04-developer-guide/00-compiling-methods/compile-using-docker.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vbeJ"><span class="theme-last-updated">最后<!-- -->由 <b>cieldon</b> <!-- -->于 <b><time datetime="2022-06-29T09:02:46.000Z">2022/6/29</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/developer-guide/compiling-methods/compile-using-ubuntu20.04"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Compile StoneDB on Ubuntu 20.04</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/developer-guide/connect-to-stonedb/use-mysql-client"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Use mysql to Connect to StoneDB</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#use-a-dockerfile-in-a-compilation-environment" class="table-of-contents__link toc-highlight">Use a Dockerfile in a compilation environment</a><ul><li><a href="#step-1-download-the-source-code-of-stonedb-and-dockerzip" class="table-of-contents__link toc-highlight">Step 1. Download the source code of StoneDB and docker.zip</a></li><li><a href="#step-2-build-a-docker-image" class="table-of-contents__link toc-highlight">Step 2. Build a Docker image</a></li><li><a href="#step-3-enter-the-container-and-compile-stonedb" class="table-of-contents__link toc-highlight">Step 3. Enter the container and compile StoneDB</a></li></ul></li><li><a href="#optional-follow-up-operations" class="table-of-contents__link toc-highlight">(Optional) Follow-up operations</a><ul><li><a href="#compress-compilation-files-to-a-tar-file" class="table-of-contents__link toc-highlight">Compress compilation files to a TAR file</a></li><li><a href="#directly-use-stonedb-in-the-container" class="table-of-contents__link toc-highlight">Directly use StoneDB in the container</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://twitter.com/StoneDataBase" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 cPPRqT"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a class="styles__Link-sc-1h1kjiy-1 cPPRqT"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu17beifen2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://stonedb.slack.com/join/shared_invite/zt-1ba2lpvbo-Vqq62DJcxViyxCZmp7Rimw#/shared-invite/email" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 cPPRqT"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu18beifen2"></use></svg></span></a></div><span class="footer__link-separator">·</span><div class="styles__LinkItemStyle-sc-1h1kjiy-0 hDEIGG"><a href="https://github.com/StoneAtom/stonedb" target="_blank" rel="noopener noreferrer" class="styles__Link-sc-1h1kjiy-1 cPPRqT"><span role="img" class="anticon undefined icon"><svg width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false"><use xlink:href="#icon-a-bianzu4"></use></svg></span></a></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © The StoneAtom-tech ALL Rights Reserved</div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.24d524fa.js"></script>
<script src="/zh/assets/js/main.349d3591.js"></script>
</body>
</html>